<?xml version="1.0" encoding="utf-8" ?>

<Patch>

      
	<!-- =========== добавление  рецепта лечения ступора =========== -->
  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName = "Human"]/recipes</xpath>
	<value>
		<li>MFFG_Shock_Therapy</li>
    </value>
  </Operation> 
  
  	<!-- =========== добавление  рецепта крафта угля =========== -->
  <Operation Class="PatchOperationInsert">
    <xpath>Defs/ThingDef[defName = "FabricationBench"]/recipes/li[text()="Make_ComponentIndustrial"]</xpath>
	<order>Append</order>
	<value>
		<li>MFFG_Make_ComponentIndustrial</li>
    </value>
  </Operation>
  
	<!-- =========== добавление  рецепта крафта компонентов =========== -->
  <Operation Class="PatchOperationInsert">
    <xpath>Defs/ThingDef[defName = "FabricationBench"]/recipes/li[text()="Make_ComponentIndustrial"]</xpath>
	<order>Append</order>
	<value>
		<li>MFFG_Make_ComponentIndustrial</li>
    </value>
  </Operation>

	<!-- =========== добавление  рецепта крафта космических компонентов =========== -->
  <Operation Class="PatchOperationInsert">
    <xpath>Defs/ThingDef[defName = "FabricationBench"]/recipes/li[text()="Make_ComponentSpacer"]</xpath>
	<order>Append</order>
	<value>
		<li>MFFG_Make_ComponentSpacer</li>
    </value>
  </Operation>
  
	<!-- =========== добавление  рецепта крафта алкоголя =========== -->
  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName = "BiofuelRefinery"]/recipes</xpath>
	<value>
		<li>MFFG_Make_Alcohol</li>
    </value>
  </Operation>
  
  	<!-- =========== добавление разборки энергоячейки механоидов =========== -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName = "UnstablePowerCell"]</xpath>
		<value>
			<resourcesFractionWhenDeconstructed>1</resourcesFractionWhenDeconstructed>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName = "UnstablePowerCell"]//comps/li[@Class="CompProperties_Power"]/basePowerConsumption</xpath>
		<value>
			<basePowerConsumption>-500</basePowerConsumption>
		</value>
	</Operation>
  
	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName = "UnstablePowerCell"]/costList/ ComponentIndustrial</xpath>
	</Operation>
  
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName = "UnstablePowerCell"]/costList</xpath>
		<value>
			<MFFG_Power_Cell>1</MFFG_Power_Cell>
			<Plasteel>50</Plasteel>
			<ComponentSpacer>1</ComponentSpacer>
		</value>
	</Operation>
  
 
	<!-- =========== добавление крафта ванометрического механоидов =========== -->
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName = "VanometricPowerCell"]/comps/li[@Class="CompProperties_Power"]/basePowerConsumption</xpath>
		<value>
			<basePowerConsumption>-2000</basePowerConsumption>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName = "VanometricPowerCell"]/costList</xpath>
		<value>
			<costList>
				<Plasteel>200</Plasteel>
				<ComponentSpacer>6</ComponentSpacer>
				<MFFG_Power_Cell>4</MFFG_Power_Cell>
			</costList>
		</value>
	</Operation>
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName = "VanometricPowerCell"]</xpath>
		<value>
			<designationCategory>Power</designationCategory>
		    <researchPrerequisites>
				<li>MFFG_AI_Core</li>
			</researchPrerequisites>
		</value>
	</Operation>
	
	
	

  
  
 	<!-- =========== добавление  перетаскиваемости топливных генераторов =========== -->
  <Operation Class="PatchOperationSequence">
  <operations>
	<li Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[defName="WoodFiredGenerator"]/statBases</xpath>
      <value>
        <Mass>10</Mass>
      </value>
    </li>
    <li Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[defName="WoodFiredGenerator"]</xpath>
      <value>
        <thingCategories>
			<li>BuildingsProduction</li>
		</thingCategories>
		<minifiedDef>MinifiedThing</minifiedDef>
      </value>
    </li>
  </operations>
</Operation>
  
  <Operation Class="PatchOperationSequence">
  <operations>
	<li Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[defName="ChemfuelPoweredGenerator"]/statBases</xpath>
      <value>
        <Mass>10</Mass>
      </value>
    </li>
    <li Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[defName="ChemfuelPoweredGenerator"]</xpath>
      <value>
        <thingCategories>
			<li>BuildingsProduction</li>
		</thingCategories>
		<minifiedDef>MinifiedThing</minifiedDef>
      </value>
    </li>
  </operations>
  </Operation>
  
 	<!-- =========== добавление  перетаскиваемости кондиционера =========== -->
  <Operation Class="PatchOperationSequence">
  <operations>
	<li Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[defName="Cooler"]/statBases</xpath>
      <value>
        <Mass>10</Mass>
      </value>
    </li>
    <li Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[defName="Cooler"]</xpath>
      <value>
        <thingCategories>
			<li>BuildingsProduction</li>
		</thingCategories>
		<minifiedDef>MinifiedThing</minifiedDef>
      </value>
    </li>
  </operations>
</Operation>
  
	<!-- =========== исправление крафта медикаментов =========== -->
 <!--  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ThingDef[defName="MedicineIndustrial"]/costList</xpath>
    <value>
      <costList>
      <MedicineHerbal>1</MedicineHerbal>
      <MFFG_Alcohol>2</MFFG_Alcohol>
      <Cloth>3</Cloth>
    </costList>
    </value>
  </Operation> -->
  
  
  
  	<!-- =========== исправление хайтек научного стола =========== -->
  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName="HiTechResearchBench"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
    <value>
	   <li>MFFG_AI_Core</li>
	   <li>MFFG_Computer</li>
    </value>
  </Operation>
  
  	<!-- =========== исправление  простого научного стола =========== -->
	
      <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>/Defs/ThingDef[defName="SimpleResearchBench"]/comps[not(li[@Class="CompProperties_AffectedByFacilities"])]</xpath>
        <value>
            <li Class="CompProperties_AffectedByFacilities">
                <linkableFacilities></linkableFacilities>
            </li>
        </value>
    </Operation>
	
  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName="SimpleResearchBench"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
    <value>
	   <li>MFFG_Computer</li>
    </value>
  </Operation>
  
  <!-- =========== исправление длительности мозгового шока =========== -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/HediffDef[defName="BrainShock"]/comps/li[@Class="HediffCompProperties_Disappears"]/disappearsAfterTicks</xpath>
    <value>
      <disappearsAfterTicks>10000~15000</disappearsAfterTicks>
    </value>
  </Operation>
	
	<!-- =========== исправление горелости металлов =========== -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ThingDef[defName="Uranium" or defName="Jade" or defName="Gold" or defName="Silver" or defName="Plasteel" or defName="Steel"]/stuffProps/statFactors/Flammability</xpath>
	<value>
		<Flammability>0</Flammability>
   </value>
  </Operation>
  


	<!-- =========== исправление эффективности батарей =========== -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ThingDef[defName="Battery"]/comps/li[@Class="CompProperties_Battery"]/efficiency</xpath>
    <value>
	   <efficiency>0.8</efficiency>
    </value>
  </Operation>
  

  
	<!-- =========== нагрев батарей =========== -->
  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName="Battery"]/comps</xpath>
    <value>
		<li Class="CompProperties_HeatPusher">
          <compClass>CompHeatPusherPowered</compClass>
          <heatPerSecond>1</heatPerSecond>
		</li>
    </value>
  </Operation>
  
  
	<!-- ==== Добавление медециснких инструментов==== -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities[./li[text()="VitalsMonitor"]] | /Defs/thingDef/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities[./li[text()="VitalsMonitor"]]</xpath>
        <value>
            <li>MFFG_Surgical_Instruments</li>
        </value>
    </Operation>



 <!--    
    <Operation Class="PatchOperationRemove">
        <success>Always</success>
        <xpath>/Defs/ThingDef[defName="TableButcher" or defName="ButcherSpot"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities/li[text()="ToolCabinet"]</xpath>
    </Operation> -->

	
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>/Defs/ThingDef[defName="FueledStove" or defName="ElectricStove"]/comps[not(li[@Class="CompProperties_AffectedByFacilities"])]</xpath>
        <value>
            <li Class="CompProperties_AffectedByFacilities">
                <linkableFacilities></linkableFacilities>
            </li>
        </value>
    </Operation>

	<!-- ====Добавление чайного столика==== -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName="FueledStove" or defName="ElectricStove"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
        <value>
            <li>MFFG_Cupboard</li>
        </value>
    </Operation>
	
	
		<!-- ====Добавление работы на маленькй плите==== -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/WorkGiverDef[defName="DoBillsCook"]/fixedBillGiverDefs</xpath>
        <value>
            <li>MFFG_Electric_Stove_Small</li>
        </value>
    </Operation>
	
</Patch>
